{"version":3,"sources":["../helloworld.js"],"names":["$","document","ready","$user","chatRooms","socket","io","connect","getUsername","prompt","console","log","$messageForm","$message","$chat","$rooms","submit","e","preventDefault","emit","message","val","user","on","data","append","html","i","length","click","createRoom","selectedRoom","text","room"],"mappings":";;AAAAA,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAY;AAC1B,QAAIC,cAAJ;AACA,QAAIC,YAAYJ,EAAE,YAAF,CAAhB;AACA,QAAIK,SAASC,GAAGC,OAAH,EAAb;AACA,aAASC,WAAT,GAAuB;AACnBL,gBAAQM,OAAO,8BAAP,CAAR;AACAC,gBAAQC,GAAR,CAAYR,KAAZ;AACH;AACDK;AACA;AACAR,MAAE,YAAY;;AAEV,YAAIY,eAAeZ,EAAE,cAAF,CAAnB;AACA,YAAIa,WAAWb,EAAE,WAAF,CAAf;AACA,YAAIc,QAAQd,EAAE,WAAF,CAAZ;AACA,YAAIe,SAASf,EAAE,QAAF,CAAb;;AAEAY,qBAAaI,MAAb,CAAoB,UAAUC,CAAV,EAAa;AAC7BA,cAAEC,cAAF;AACAb,mBAAOc,IAAP,CAAY,cAAZ,EAA4B,EAAEC,SAASP,SAASQ,GAAT,EAAX,EAA2BC,MAAMnB,KAAjC,EAA5B;AACAU,qBAASQ,GAAT,CAAa,EAAb;AACAX,oBAAQC,GAAR,CAAY,WAAZ;AAEH,SAND;AAOAN,eAAOkB,EAAP,CAAU,aAAV,EAAyB,UAAUC,IAAV,EAAgB;AACrCV,kBAAMW,MAAN,CAAa,SAAUD,KAAKF,IAAf,GAAsB,IAAtB,GAA4BE,KAAKJ,OAAjC,GAA2C,OAAxD;AACH,SAFD;AAGAf,eAAOkB,EAAP,CAAU,cAAV,EAA0B,UAAUC,IAAV,EAAgB;AACtC,gBAAIE,OAAO,EAAX;AACA,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIH,KAAKI,MAAzB,EAAiCD,GAAjC,EAAsC;AAClCjB,wBAAQC,GAAR,CAAYgB,CAAZ;AACAD,wBAAQ,SAASF,KAAKG,CAAL,EAAQL,IAAjB,GAAwB,IAAxB,GAA8BE,KAAKG,CAAL,EAAQP,OAAtC,GAAgD,OAAxD;AACH;AACDN,kBAAMY,IAAN,CAAWA,IAAX;AACH,SAPD;;AAUA;AACA;AACA1B,UAAE,aAAF,EAAiB6B,KAAjB,CAAuB,YAAY;AAC/B,gBAAIC,aAAarB,OAAO,6BAAP,CAAjB;AACAJ,mBAAOc,IAAP,CAAY,aAAZ,EAA2BW,UAA3B;AACH,SAHD;AAIA9B,UAAE,QAAF,EAAYuB,EAAZ,CAAe,OAAf,EAAwB,KAAxB,EAAgC,YAAY;AACxC,gBAAIQ,eAAe/B,EAAE,IAAF,EAAQgC,IAAR,EAAnB;AACAtB,oBAAQC,GAAR,CAAYoB,YAAZ;AACI1B,mBAAOc,IAAP,CAAY,eAAZ,EAA6BY,YAA7B;AACP,SAJD;;AAMA;AACA1B,eAAOkB,EAAP,CAAU,UAAV,EAAsB,UAAUC,IAAV,EAAgB;AAClCT,mBAAOU,MAAP,CAAc,yCAAyCD,KAAKS,IAA9C,GAAqD,WAAnE;AAEH,SAHD;AAIA;AACA5B,eAAOkB,EAAP,CAAU,WAAV,EAAuB,UAAUC,IAAV,EAAgB;AACnC,gBAAIE,OAAO,EAAX;AACA,iBAAI,IAAIC,IAAG,CAAX,EAAcA,IAAEH,KAAKI,MAArB,EAA6BD,GAA7B,EAAiC;AAC7BjB,wBAAQC,GAAR,CAAY,UAAZ,EAAwBa,KAAKG,CAAL,EAAQM,IAAhC;AACAP,wBAAM,yCAAyCF,KAAKG,CAAL,EAAQM,IAAjD,GAAwD,WAA9D;AACH;AACDlB,mBAAOW,IAAP,CAAYA,IAAZ;AACH,SAPD;AASH,KAtDD;AAuDH,CAjED","file":"helloworld.js","sourcesContent":["$(document).ready(function () {\r\n    let $user;\r\n    let chatRooms = $('.chatRooms');\r\n    let socket = io.connect();\r\n    function getUsername() {\r\n        $user = prompt(\"Type in your username dawd :\");\r\n        console.log($user);\r\n    }\r\n    getUsername();\r\n    // let chatWindow = $('#chatMsgs');\r\n    $(function () {\r\n\r\n        let $messageForm = $('#messageForm');\r\n        let $message = $('#inputMSg');\r\n        let $chat = $('#chatMsgs');\r\n        let $rooms = $('#rooms');\r\n\r\n        $messageForm.submit(function (e) {\r\n            e.preventDefault();\r\n            socket.emit('send message', { message: $message.val(), user: $user} );\r\n            $message.val('');\r\n            console.log(\"submitted\");\r\n\r\n        });\r\n        socket.on('new message', function (data) {\r\n            $chat.append('<li>'  + data.user + \": \"+ data.message + '</li>')\r\n        });\r\n        socket.on('get messages', function (data) {\r\n            let html = '';\r\n            for (let i = 0; i < data.length; i++) {\r\n                console.log(i);\r\n                html += '<li>' + data[i].user + \": \" +data[i].message + '</li>'\r\n            }\r\n            $chat.html(html);\r\n        });\r\n\r\n\r\n        //Rooms\r\n        //create room and emit\r\n        $('#createRoom').click(function () {\r\n            let createRoom = prompt(\"Give your chatroom a name :\");\r\n            socket.emit('create room', createRoom)\r\n        });\r\n        $('#rooms').on('click', 'li>',  function () {\r\n            let selectedRoom = $(this).text();\r\n            console.log(selectedRoom);\r\n                socket.emit('selected room', selectedRoom);\r\n        });\r\n\r\n        //append the latest room to html (add room to end of list)\r\n        socket.on('new room', function (data) {\r\n            $rooms.append('<li class=\"selectRoom\"><a href=\"#\" >' + data.room + '</a></li>')\r\n            \r\n        });\r\n        //get rooms from db and show them in the list\r\n        socket.on('get rooms', function (data) {\r\n            let html = '';\r\n            for(let i= 0; i<data.length; i++){\r\n                console.log(\"rooms : \", data[i].room);\r\n                html+='<li class=\"selectRoom\"><a href=\"#\" >' + data[i].room + '</a></li>'\r\n            }\r\n            $rooms.html(html);\r\n        });\r\n\r\n    });\r\n});"]}